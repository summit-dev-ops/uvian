# Chat Domain API Contract

## Overview

This document outlines the API endpoints required for the Chat Domain.
**Key Change**: All IDs (Conversations, Messages) are now generated on the **client-side** (v4 UUIDs) and passed to the server. The server must respect these IDs and error on collision.

## Endpoints

### 1. Create Conversation

**POST** `/api/conversations`

Creates a new conversation with a client-generated ID.

**Request Body:**

```json
{
  "id": "uuid-v4-string",
  "title": "Conversation Title"
}
```

**Response (201 Created):**

```json
{
  "id": "uuid-v4-string",
  "title": "Conversation Title",
  "createdAt": "ISO-8601-timestamp",
  "updatedAt": "ISO-8601-timestamp"
}
```

### 2. Get Conversations

**GET** `/api/conversations`

Retrieves a list of conversations.

**Response (200 OK):**

```json
[
  {
    "id": "uuid-v4-string",
    "title": "Conversation Title",
    "createdAt": "ISO-8601-timestamp",
    "updatedAt": "ISO-8601-timestamp"
  }
]
```

### 3. Get Conversation

**GET** `/api/conversations/{conversationId}`

Retrieves details of a specific conversation.

**Response (200 OK):**

```json
{
  "id": "uuid-v4-string",
  "title": "Conversation Title",
  "createdAt": "ISO-8601-timestamp",
  "updatedAt": "ISO-8601-timestamp"
}
```

### 4. Send Message

**POST** `/api/conversations/{conversationId}/messages`

Sends a message to an existing conversation. The message ID is generated by the client.

**Request Body:**

```json
{
  "id": "uuid-v4-string",
  "content": "Hello world",
  "role": "user" // Optional, defaults to 'user'
}
```

**Response (201 Created):**

```json
{
  "id": "uuid-v4-string",
  "conversationId": "uuid-v4-string",
  "content": "Hello world",
  "role": "user",
  "createdAt": "ISO-8601-timestamp",
  "updatedAt": "ISO-8601-timestamp"
}
```

### 5. Get Messages

**GET** `/api/conversations/{conversationId}/messages`

Retrieves all messages for a specific conversation.

**Response (200 OK):**

```json
[
  {
    "id": "uuid-v4-string",
    "conversationId": "uuid-v4-string",
    "content": "Previous message content",
    "role": "user",
    "createdAt": "ISO-8601-timestamp",
    "updatedAt": "ISO-8601-timestamp"
  }
]
```

### 6. Delete Conversation

**DELETE** `/api/conversations/{conversationId}`

Deletes a conversation and all associated messages.

**Response (204 No Content)**
